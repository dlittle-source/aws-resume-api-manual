The following AWS CLI commands were used to build and manage the Serverless Resume API using AWS Lambda, DynamoDB, and API Gateway.

Attach IAM Policies to Lambda Role
aws iam attach-role-policy \
  --role-name lambda-resume-role \
  --policy-arn arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole

aws iam attach-role-policy \
  --role-name lambda-resume-role \
  --policy-arn arn:aws:iam::aws:policy/AmazonDynamoDBReadOnlyAccess

Create DynamoDB Table
aws dynamodb create-table --table-name resumes --attribute-definitions AttributeName=id,AttributeType=S --key-schema AttributeName=id,KeyType=HASH --billing-mode PAY_PER_REQUEST --region us-east-1 --no-cli-pager

Add data to DynamoDB Table
aws dynamodb batch-write-item --profile default --request-items file://resume-item.json --region us-east-1 --no-cli-pager

Package Lambda Source Code
Compress-Archive -Path app.py -DestinationPath lambda.zip

Create AWS Lambda Function
aws lambda create-function --function-name resume-api --runtime python3.13 --role arn:aws:iam::12345678:role/lambda-resume-role --handler app.handler --zip-file fileb://lambda.zip --no-cli-pager

Create a public REST API
aws apigateway create-rest-api --name ResumeRestAPI --endpoint-configuration types=REGIONAL --region us-east-1

Get the root resource ID
aws apigateway get-rest-apis --region us-east-1 --no-cli-pager

Create a resumes resource
aws apigateway create-resource --rest-api-id yyn7p6mltb --parent-id dve808sgl8 --path-part resumes --region us-east-1 --no-cli-pager

Create a GET method (no auth = public)
aws apigateway put-method --rest-api-id yyn7p6mltb --resource-id smbnpx --http-method GET --authorization-type NONE --region us-east-1 --no-cli-pager

Integrate REST API with Lambda
aws apigateway put-integration --rest-api-id yyn7p6mltb --resource-id smbnpx --http-method GET --type AWS_PROXY --integration-http-method POST --uri arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:0123456789:function:resume-api/invocations --region us-east-1 --no-cli-pager

Allow API Gateway to invoke Lambda
aws lambda add-permission --function-name resume-api --statement-id apigateway-rest-invoke --action lambda:InvokeFunction --principal apigateway.amazonaws.com --source-arn arn:aws:execute-api:us-east-1:0123456789:yyn7p6mltb/*/GET/resumes --region us-east-1 --no-cli-pager

Deploy the REST API
aws apigateway create-deployment --rest-api-id yyn7p6mltb --stage-name prod --region us-east-1 --no-cli-pager

Final Public Invoke URL
https://yyn7p6mltb.execute-api.us-east-1.amazonaws.com/prod/resumes

Intergrate CloudWatch with API Gateway a Lambda
aws iam create-role --role-name APIGatewayCloudWatchRole --assume-role-policy-document file://apigateway-cloudwatch-trust.json --no-cli-pager
Verify Role Creation: aws iam get-role --role-name APIGatewayCloudWatchRole --no-cli-pager

aws iam attach-role-policy --role-name APIGatewayCloudWatchRole --policy-arn arn:aws:iam::aws:policy/service-role/AmazonAPIGatewayPushToCloudWatchLogs --no-cli-pager
Verify Role Creation: aws iam list-attached-role-policies --role-name APIGatewayCloudWatchRole --no-cli-pager  

aws apigateway update-account --patch-operations op=replace,path=/cloudwatchRoleArn,value=arn:aws:iam::0123456789:role/APIGatewayCloudWatchRole --region us-east-1 --no-cli-pager

This will return just the ARN of the role, for example:
aws iam get-role --role-name APIGatewayCloudWatchRole --query "Role.Arn" --output text --no-cli-pager

aws apigateway update-stage --rest-api-id YOUR_API_ID --stage-name prod --patch-operations op=replace,path=/*/*/logging/loglevel,value=INFO op=replace,path=/*/*/logging/dataTrace,value=true --region us-east-1 --no-cli-pager

Cleanup Commands
Delete DynamoDB Table
aws dynamodb delete-table --table-name resumes --region us-east-1 --no-cli-pager
 
Delete Lambda Function
aws lambda delete-function --function-name apigateway-test-demo --region us-east-1

Delete API Gateway (REST API)
aws apigateway delete-rest-api --rest-api-id rko1yd24qh --region us-east-1




